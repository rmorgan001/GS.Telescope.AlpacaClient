<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:vm="clr-namespace:GS.Telescope.AlpacaClient.Dialog"
             xmlns:mainApp="clr-namespace:GS.Telescope.AlpacaClient.MainApp"
             xmlns:avalonia="clr-namespace:Material.Icons.Avalonia;assembly=Material.Icons.Avalonia"
             x:DataType="vm:ConfirmDialogViewModel"
             mc:Ignorable="d"
             MinWidth="300"
             Width="{Binding DialogWidth}"
             Height="{Binding DialogHeight}"
             Foreground="{DynamicResource PrimaryForeground}"
             Background="Transparent"
             x:Class="GS.Telescope.AlpacaClient.Dialog.ConfirmDialogView"
             d:DataContext="{x:Static mainApp:DesignData.ConfirmDialogViewModel}">
    
    <!-- Main Dialog Window -->
    <Border 
        CornerRadius="20" 
        ClipToBounds="True" 
        Margin="10">
        <Border.Effect>
            <DropShadowEffect Color="{DynamicResource PrimaryBackgroundColor2}" />
        </Border.Effect>
        <Grid RowDefinitions="Auto, *" Background="{DynamicResource MaterialCardBackgroundBrush}">
            <!-- Title -->
            <Border Grid.Row="0" CornerRadius="20 20 0 0">
                <TextBlock
                    HorizontalAlignment="Center"
                    Text="{Binding Title}"
                    Classes="Headline6"
                    Margin="5"
                    />
            </Border>
            <Grid Grid.Row="1" RowDefinitions="Auto, *, *, Auto" Margin="10" >
                <!-- Description -->
                <Grid Grid.Row="0" ColumnDefinitions="Auto, 10, *" >
                    <avalonia:MaterialIcon Width="{Binding IconWidth}"
                                           Height="{Binding IconHeight}"
                                           HorizontalAlignment="Center"
                                           VerticalAlignment="Center"
                                           Animation="None"
                                           Kind="{Binding IconText}" />
                    <TextBlock Grid.Column="2" TextWrapping="Wrap" 
                               Text="{Binding Message}"
                               Classes="Body1"
                               VerticalAlignment="Center"/>
                </Grid>
                <TextBlock Grid.Row="1"  
                           Text="{Binding StatusText}"
                           TextAlignment="Center"
                           TextWrapping="Wrap"
                           />
                <!-- Buttons -->
                <StackPanel Grid.Row="2"
                            Orientation="Horizontal" 
                            HorizontalAlignment="Center"
                            Spacing="10"
                            IsVisible="{Binding !Busy}">
                    <Button 
                        Command="{Binding ConfirmCommand}"
                        Classes="Flat">
                        <TextBlock MinWidth="70" TextAlignment="Center" Text="{Binding AcceptText}" />
                    </Button>
                    <Button 
                        Command="{Binding CancelCommand}"
                        Classes="Flat">
                        <TextBlock MinWidth="70" TextAlignment="Center" Text="{Binding CancelText}" />
                    </Button>
                </StackPanel>
                <TextBlock Grid.Row="3"  
                           Text="{Binding ProgressText}"
                           IsVisible="{Binding Busy}"
                           TextAlignment="Right"
                           TextWrapping="Wrap"
                           Margin="0 10"/>
            </Grid>
        </Grid>
    </Border>
</UserControl>
